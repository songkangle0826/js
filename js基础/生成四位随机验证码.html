<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
		#codeBox{
			width:300px;
			height:60px;
			line-height: 60px;
			border:1px solid #ddd;
			text-align: center;
			font-size: 30px;
			letter-spacing:20px;
			font-style:italic;
		}
	</style>
</head>
<body>
	<div id="codeBox"></div>
	<a href="javascript:;" id="link">看不清楚换一张</a>
</body>
<script type="text/javascript">
	var codeBox = document.getElementById("codeBox");
	var link = document.getElementById("link");
	function querycode() {
		// 1.准备验证码获取得范围
		var codeArea = 'qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890';
		// 2.我们只需要准备四个索引(0-61);
		var max = codeArea.length-1;
		var result = '';
		for(var i = 0;i<4;i++){
			var n = Math.floor(Math.random() * (Number(max)+1)),
			char = codeArea.charAt(n);
			//生成四个不重复得，char
			if(result.indexOf(char)>-1){
				i--;
				continue;
			}
			result += char;

		}

		// while( result.length<4 ){
		// 	var n = Math.floor(Math.random() * (Number(max)+1)),
		// 	char = codeArea.charAt(n);
		// 	if (result.indexOf(char)===-1) {
		// 		result+=char;
		// 	}
		// }


		return result;
	}

	codeBox.innerHTML = querycode();
	link.onclick= function(){
		codeBox.innerHTML = querycode();
	}
</script>
</html>